<!DOCTYPE html>
<html>
	<head>
		<title>Search Results | Milk Tea in San Diego</title>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,user-scalable=yes,initial-scale=1">
		<link href="images/favicon.png" rel="icon" type="image/png">
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:700,300,600,400' rel='stylesheet' type='text/css'>
		<link href='css/common.css' rel='stylesheet' type='text/css'>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="js/common.js"></script>
		<script src="js/cardCollection.js"></script>
	</head>
	<body>
		<div id="navbarContainerGhost"></div>
		<div id="navbarContainer">
			<div id="navbar">
				<div id="logo">
					<a href="index.html">
						<img class="logoImg" src="images/logo.png" alt="x">
					</a>
				</div>
				<div id="search">I want to see milk tea places in San Diego ordered by
					<select id="sortBy">
						<option selected="selected" disabled="disabled">...</option>
						<option>Overall Rating</option>
						<option>Taste</option>
                        <option>Ambiance</option>
						<option>Customer Service</option>
						<option>Distance From Me</option>
					</select>
				</div>
			</div>
		</div>
		<div id="navbarContainerSubGhost"></div>
		<div id="navbarContainerSub">
			<div id="navbarSub">
				<div class="navbarItem"><a href="what-is-milk-tea.html">What is Milk Tea?</a></div>
				<div class="navbarItem"><a href="beginners-guide.html">Beginner's Guide</a></div>
				<div class="navbarItem"><a href="specials-and-events.html">Specials &amp; Events</a></div>
			</div>
		</div>
		<div id="bannerContainer" class="searchBg">
			<div id="banner">
				<div id="titleText" style="text-align:left;">
					Showing You Milk Tea Places By <span id="sortByTarget"></span>
				</div>
			</div>
		</div>
		<div id="contentContainer">
			<div id="content">
				<div class="sectionHeader"><h1 class="results">Search Results</h1></div>
				<div class="sectionSeparation"></div>
				<div id="placeCardTarget"></div>
			</div>
		</div>
		<div id="footerContainer">
			<div id="footer">
				<div class="footerItem">Who We Are</div>
				<div class="footerItem">Contact Us</div>
				<div class="footerItem">Terms</div>
				<div class="footerItem">Privacy</div>
				<div id="footerCopyright">Â© 2014 Christine Do, Frank Mezzatesta, Donna Yee</div>
			</div>
		</div>
		<script>
			$(document).ready(function(){
				sortCardCollection();
			});
			function sortCardCollection(){
				if ($("#sortBy").val() == "Overall Rating"){
					cardCollection.sort(function(a,b){return (b.rating-a.rating);});
				}else if ($("#sortBy").val() == "Taste"){
					cardCollection.sort(function(a,b){return (b.taste-a.taste);});
				}else if ($("#sortBy").val() == "Ambiance"){
					cardCollection.sort(function(a,b){return (b.ambiance-a.ambiance);});
				}else if ($("#sortBy").val() == "Customer Service"){
					cardCollection.sort(function(a,b){return (b.customerService-a.customerService);});
				}else if ($("#sortBy").val() == "Distance From Me"){
					cardCollection.sort(function(a,b){return (b.distance-a.distance);});
				}else{
					cardCollection.sort(function(a,b){return (b.rating-a.rating);});
				}
				var out = "";
				var i = 1;
				var card;
				var cardIndex = 0;
				while (cardIndex < cardCollection.length){
					// grab the card data
					card = cardCollection[cardIndex];
					// output the card
					out += '\
						<div class="placeCard'+i+'">\
							<img class="placeImg" src="images/tea.jpg" alt="x">\
							<div class="placeCaption">\
								<div class="cardTitle">\
									'+card.name+'<br>\
								</div>\
								<div style="text-align:right;">\
									Overall Rating: '+ratingToHearts(card.rating)+'<br>\
									Taste: '+ratingToHearts(card.taste)+'<br>\
									Ambiance: '+ratingToHearts(card.ambiance)+'<br>\
									Customer Service: '+ratingToHearts(card.customerService)+'<br>\
									Distance: '+card.distance+'mi away<br>\
								</div>\
							</div>\
							<div class="placeRank"></div>\
						</div>\
					';
					// clear the row
					if (i == 4){out += '<div class="clear"></div>';}
					// advance i
					i %= 4;
					i++;
					cardIndex++
				}
				$("#placeCardTarget").html(out);
			}
			function ratingToHearts(rating){
				var heartsOut = "";
				switch (rating){
					case 0.5:heartsOut = '<img class="cardHearts" src="images/Ratings/1HalfRating.svg">';break;
					case   1:heartsOut = '<img class="cardHearts" src="images/Ratings/2OneRating.svg">';break;
					case 1.5:heartsOut = '<img class="cardHearts" src="images/Ratings/3OneAndHalfRating.svg">';break;
					case   2:heartsOut = '<img class="cardHearts" src="images/Ratings/4TwoRating.svg">';break;
					case 2.5:heartsOut = '<img class="cardHearts" src="images/Ratings/5TwoAndHalfRating.svg">';break;
					case   3:heartsOut = '<img class="cardHearts" src="images/Ratings/6ThreeRating.svg">';break;
					case 3.5:heartsOut = '<img class="cardHearts" src="images/Ratings/7ThreeAndHalfRating.svg">';break;
					case   4:heartsOut = '<img class="cardHearts" src="images/Ratings/8FourRating.svg">';break;
					case 4.5:heartsOut = '<img class="cardHearts" src="images/Ratings/9FourAndHalfRating.svg">';break;
					case   5:heartsOut = '<img class="cardHearts" src="images/Ratings/10FiveRating.svg">';break;
				}
				return heartsOut;
			}
		</script>
	</body>
</html>
